\hypertarget{menuoption_8h}{}\doxysection{lib/menuoption.h File Reference}
\label{menuoption_8h}\index{lib/menuoption.h@{lib/menuoption.h}}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef enum \mbox{\hyperlink{menuoption_8h_a5be5e47a3042bc91460d05e47f32120d}{Menu\+Option}} \mbox{\hyperlink{menuoption_8h_a69fb1cdbe9f4070813c0b0ffbd4879e2}{Menu\+Option}}
\end{DoxyCompactItemize}
\doxysubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{menuoption_8h_a5be5e47a3042bc91460d05e47f32120d}{Menu\+Option}} \{ {\bfseries P\+L\+A\+N\+T\+\_\+\+T\+R\+EE} = 1, 
{\bfseries Q\+U\+E\+R\+Y\+\_\+\+T\+R\+EE}, 
{\bfseries U\+P\+D\+A\+T\+E\+\_\+\+T\+R\+EE}, 
{\bfseries E\+X\+I\+T\+\_\+\+P\+R\+O\+G\+R\+AM}
 \}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
char $\ast$ \mbox{\hyperlink{menuoption_8h_a496d61fead00c3a207d72fbd780a561b}{moption\+\_\+handle}} (int new\+\_\+sockfd, int semid, char $\ast$cli\+\_\+addr, \mbox{\hyperlink{menuoption_8h_a5be5e47a3042bc91460d05e47f32120d}{Menu\+Option}} mo)
\item 
void \mbox{\hyperlink{menuoption_8h_a215b9f209465187d24b52152f8b781d0}{moption\+\_\+display}} (\mbox{\hyperlink{menuoption_8h_a5be5e47a3042bc91460d05e47f32120d}{Menu\+Option}} $\ast$opt)
\item 
const char $\ast$ \mbox{\hyperlink{menuoption_8h_a43ea43aa23e5cf4da54a2be35f7f0fce}{get\+Menu\+Option\+Name}} (enum \mbox{\hyperlink{menuoption_8h_a5be5e47a3042bc91460d05e47f32120d}{Menu\+Option}} op)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyDate}{Date}
2022-\/11-\/16 23\+:05\+:32 PM +0800 
\end{DoxyDate}


\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{menuoption_8h_a69fb1cdbe9f4070813c0b0ffbd4879e2}\label{menuoption_8h_a69fb1cdbe9f4070813c0b0ffbd4879e2}} 
\index{menuoption.h@{menuoption.h}!MenuOption@{MenuOption}}
\index{MenuOption@{MenuOption}!menuoption.h@{menuoption.h}}
\doxysubsubsection{\texorpdfstring{MenuOption}{MenuOption}}
{\footnotesize\ttfamily typedef enum \mbox{\hyperlink{menuoption_8h_a5be5e47a3042bc91460d05e47f32120d}{Menu\+Option}} \mbox{\hyperlink{menuoption_8h_a5be5e47a3042bc91460d05e47f32120d}{Menu\+Option}}}

Menu\+Option defines available options in the client menu 

\doxysubsection{Enumeration Type Documentation}
\mbox{\Hypertarget{menuoption_8h_a5be5e47a3042bc91460d05e47f32120d}\label{menuoption_8h_a5be5e47a3042bc91460d05e47f32120d}} 
\index{menuoption.h@{menuoption.h}!MenuOption@{MenuOption}}
\index{MenuOption@{MenuOption}!menuoption.h@{menuoption.h}}
\doxysubsubsection{\texorpdfstring{MenuOption}{MenuOption}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{menuoption_8h_a5be5e47a3042bc91460d05e47f32120d}{Menu\+Option}}}

Menu\+Option defines available options in the client menu 

Definition at line 11 of file menuoption.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{11 \{ PLANT\_TREE = 1, QUERY\_TREE, UPDATE\_TREE, EXIT\_PROGRAM \} \mbox{\hyperlink{menuoption_8h_a5be5e47a3042bc91460d05e47f32120d}{MenuOption}};}

\end{DoxyCode}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{menuoption_8h_a43ea43aa23e5cf4da54a2be35f7f0fce}\label{menuoption_8h_a43ea43aa23e5cf4da54a2be35f7f0fce}} 
\index{menuoption.h@{menuoption.h}!getMenuOptionName@{getMenuOptionName}}
\index{getMenuOptionName@{getMenuOptionName}!menuoption.h@{menuoption.h}}
\doxysubsubsection{\texorpdfstring{getMenuOptionName()}{getMenuOptionName()}}
{\footnotesize\ttfamily const char$\ast$ get\+Menu\+Option\+Name (\begin{DoxyParamCaption}\item[{enum \mbox{\hyperlink{menuoption_8h_a5be5e47a3042bc91460d05e47f32120d}{Menu\+Option}}}]{op }\end{DoxyParamCaption})}

Get menu option into readable string


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em op} & A menu option\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A string that specifies the name of menu option, N\+U\+LL if the state is unknown 
\end{DoxyReturn}


Definition at line 99 of file menuoption.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{100 \{}
\DoxyCodeLine{101   \textcolor{keywordflow}{switch} (op) \{}
\DoxyCodeLine{102     \textcolor{keywordflow}{case} PLANT\_TREE:}
\DoxyCodeLine{103       \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Plant Tree"};}
\DoxyCodeLine{104 }
\DoxyCodeLine{105     \textcolor{keywordflow}{case} QUERY\_TREE:}
\DoxyCodeLine{106       \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Query Tree"};}
\DoxyCodeLine{107 }
\DoxyCodeLine{108     \textcolor{keywordflow}{case} UPDATE\_TREE:}
\DoxyCodeLine{109       \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Update Tree"};}
\DoxyCodeLine{110 }
\DoxyCodeLine{111     \textcolor{keywordflow}{case} EXIT\_PROGRAM:}
\DoxyCodeLine{112       \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Exit Program"};}
\DoxyCodeLine{113 }
\DoxyCodeLine{114     \textcolor{keywordflow}{default}:}
\DoxyCodeLine{115       \textcolor{keywordflow}{return} (\textcolor{keywordtype}{char}*) 0;}
\DoxyCodeLine{116   \}}
\DoxyCodeLine{117 }
\DoxyCodeLine{118 \}}

\end{DoxyCode}
\mbox{\Hypertarget{menuoption_8h_a215b9f209465187d24b52152f8b781d0}\label{menuoption_8h_a215b9f209465187d24b52152f8b781d0}} 
\index{menuoption.h@{menuoption.h}!moption\_display@{moption\_display}}
\index{moption\_display@{moption\_display}!menuoption.h@{menuoption.h}}
\doxysubsubsection{\texorpdfstring{moption\_display()}{moption\_display()}}
{\footnotesize\ttfamily void moption\+\_\+display (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{menuoption_8h_a5be5e47a3042bc91460d05e47f32120d}{Menu\+Option}} $\ast$}]{opt }\end{DoxyParamCaption})}

Display menu options


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em opt} & A Menu\+Option got from user\textquotesingle{}s input \\
\hline
\end{DoxyParams}


Definition at line 71 of file menuoption.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{72 \{}
\DoxyCodeLine{73   printf(\textcolor{stringliteral}{"  \_\_\_\_\_\_\_\_                               .\_\_                       .\_\_\_ \(\backslash\)n"});}
\DoxyCodeLine{74   printf(\textcolor{stringliteral}{" /  \_\_\_\_\_/\_\_\_\_\_\_\_   \_\_\_\_   \_\_\_\_    \_\_\_\_  |  |  \_\_\_\_\_     \_\_\_\_    \_\_| \_/ \(\backslash\)n"});}
\DoxyCodeLine{75   printf(\textcolor{stringliteral}{"/   \(\backslash\)\(\backslash\)  \_\_\_\(\backslash\)\(\backslash\)\_  \_\_ \(\backslash\)\(\backslash\)\_/ \_\_ \(\backslash\)\(\backslash\)\_/ \_\_ \(\backslash\)\(\backslash\)  /    \(\backslash\)\(\backslash\) |  |  \(\backslash\)\(\backslash\)\_\_  \(\backslash\)\(\backslash\)   /    \(\backslash\)\(\backslash\)  / \_\_ |  \(\backslash\)n"});}
\DoxyCodeLine{76   printf(\textcolor{stringliteral}{"\(\backslash\)\(\backslash\)    \(\backslash\)\(\backslash\)\_\(\backslash\)\(\backslash\)  \(\backslash\)\(\backslash\)|  | \(\backslash\)\(\backslash\)/\(\backslash\)\(\backslash\)  \_\_\_/\(\backslash\)\(\backslash\)  \_\_\_/ |   |  \(\backslash\)\(\backslash\)|  |\_\_ / \_\_ \(\backslash\)\(\backslash\)\_|   |  \(\backslash\)\(\backslash\)/ /\_/ |  \(\backslash\)n"});}
\DoxyCodeLine{77   printf(\textcolor{stringliteral}{" \(\backslash\)\(\backslash\)\_\_\_\_\_\_  /|\_\_|    \(\backslash\)\(\backslash\)\_\_\_  >\(\backslash\)\(\backslash\)\_\_\_  >|\_\_\_|  /|\_\_\_\_/(\_\_\_\_  /|\_\_\_|  /\(\backslash\)\(\backslash\)\_\_\_\_ |  \(\backslash\)n"});}
\DoxyCodeLine{78   printf(\textcolor{stringliteral}{"        \(\backslash\)\(\backslash\)/             \(\backslash\)\(\backslash\)/     \(\backslash\)\(\backslash\)/      \(\backslash\)\(\backslash\)/            \(\backslash\)\(\backslash\)/      \(\backslash\)\(\backslash\)/      \(\backslash\)\(\backslash\)/  \(\backslash\)n\(\backslash\)n"});}
\DoxyCodeLine{79 }
\DoxyCodeLine{80   printf(\textcolor{stringliteral}{"(implemented) Welcome to greenland, a place to plant tree!\(\backslash\)n\(\backslash\)n"});}
\DoxyCodeLine{81   printf(\textcolor{stringliteral}{"We don't have any affiliation to the Greenland government, but if \(\backslash\)n"}}
\DoxyCodeLine{82          \textcolor{stringliteral}{"you can plant a tree there, we are more than welcome! :)\(\backslash\)n"});}
\DoxyCodeLine{83 }
\DoxyCodeLine{84   printf(\textcolor{stringliteral}{"\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\(\backslash\)n"});}
\DoxyCodeLine{85   printf(\textcolor{stringliteral}{"\#                              \#\(\backslash\)n"});}
\DoxyCodeLine{86   printf(\textcolor{stringliteral}{"\#            MENU              \#\(\backslash\)n"});}
\DoxyCodeLine{87   printf(\textcolor{stringliteral}{"\#                              \#\(\backslash\)n"});}
\DoxyCodeLine{88   printf(\textcolor{stringliteral}{"\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\(\backslash\)n\(\backslash\)n"});}
\DoxyCodeLine{89   printf(\textcolor{stringliteral}{"\(\backslash\)t1. To plant a tree\(\backslash\)n"});}
\DoxyCodeLine{90   printf(\textcolor{stringliteral}{"\(\backslash\)t2. To query a tree\(\backslash\)n"});}
\DoxyCodeLine{91   printf(\textcolor{stringliteral}{"\(\backslash\)t3. To update a tree's status\(\backslash\)n"});}
\DoxyCodeLine{92   printf(\textcolor{stringliteral}{"\(\backslash\)t4. Exit\(\backslash\)n"});}
\DoxyCodeLine{93   printf(\textcolor{stringliteral}{"(Choose a service needed according to the number)\(\backslash\)n\(\backslash\)n"});}
\DoxyCodeLine{94   printf(\textcolor{stringliteral}{"Option: "});}
\DoxyCodeLine{95   scanf(\textcolor{stringliteral}{"\%d"}, (\textcolor{keywordtype}{int}*)opt);}
\DoxyCodeLine{96   system(\textcolor{stringliteral}{"clear"});}
\DoxyCodeLine{97 \}}

\end{DoxyCode}
\mbox{\Hypertarget{menuoption_8h_a496d61fead00c3a207d72fbd780a561b}\label{menuoption_8h_a496d61fead00c3a207d72fbd780a561b}} 
\index{menuoption.h@{menuoption.h}!moption\_handle@{moption\_handle}}
\index{moption\_handle@{moption\_handle}!menuoption.h@{menuoption.h}}
\doxysubsubsection{\texorpdfstring{moption\_handle()}{moption\_handle()}}
{\footnotesize\ttfamily char$\ast$ moption\+\_\+handle (\begin{DoxyParamCaption}\item[{int}]{new\+\_\+sockfd,  }\item[{int}]{semid,  }\item[{char $\ast$}]{cli\+\_\+addr,  }\item[{\mbox{\hyperlink{menuoption_8h_a5be5e47a3042bc91460d05e47f32120d}{Menu\+Option}}}]{mo }\end{DoxyParamCaption})}

Handles menu option


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em sockfd} & Socket number of client \\
\hline
\mbox{\texttt{ in}}  & {\em semid} & Semaphore\textquotesingle{}s id \\
\hline
\mbox{\texttt{ in}}  & {\em mo} & A Menu\+Option enum to be handle\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if the handling succeeded, -\/1 if failed 
\end{DoxyReturn}


Definition at line 29 of file menuoption.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{30 \{}
\DoxyCodeLine{31   \textcolor{keywordtype}{char} buffer[BUFFER\_SIZE];}
\DoxyCodeLine{32   \textcolor{keywordtype}{char}* msg = malloc(1024);}
\DoxyCodeLine{33   \mbox{\hyperlink{structTree}{Tree}} tree;}
\DoxyCodeLine{34 }
\DoxyCodeLine{35   \textcolor{keywordflow}{switch} (mo) \{}
\DoxyCodeLine{36     \textcolor{keywordflow}{case} PLANT\_TREE:}
\DoxyCodeLine{37       p(semid); \textcolor{comment}{// lock the semaphore for writing}}
\DoxyCodeLine{38       plant\_tree\_server(FILENAME, tree, new\_sockfd, buffer);}
\DoxyCodeLine{39       p(semid); \textcolor{comment}{// lock the semaphore for writing}}
\DoxyCodeLine{40       sprintf(msg, \textcolor{stringliteral}{"Client [\%s]: Plant tree process done."}, cli\_addr);}
\DoxyCodeLine{41       \textcolor{keywordflow}{return} msg;}
\DoxyCodeLine{42       \textcolor{keywordflow}{break};}
\DoxyCodeLine{43 }
\DoxyCodeLine{44     \textcolor{keywordflow}{case} QUERY\_TREE:}
\DoxyCodeLine{45       query\_tree\_server(FILENAME, tree, new\_sockfd, buffer);}
\DoxyCodeLine{46       sprintf(msg, \textcolor{stringliteral}{"Client [\%s]: Query tree process done."}, cli\_addr);}
\DoxyCodeLine{47       \textcolor{keywordflow}{return} msg;}
\DoxyCodeLine{48       \textcolor{keywordflow}{break};}
\DoxyCodeLine{49 }
\DoxyCodeLine{50     \textcolor{keywordflow}{case} UPDATE\_TREE:}
\DoxyCodeLine{51       p(semid); \textcolor{comment}{// lock the semaphore for writing}}
\DoxyCodeLine{52       \textcolor{comment}{/* critical section */}}
\DoxyCodeLine{53       \textcolor{comment}{/* invoke update\_tree\_server function */}}
\DoxyCodeLine{54       update\_tree\_server(FILENAME, tree, new\_sockfd, buffer);}
\DoxyCodeLine{55       v(semid); \textcolor{comment}{// unlock the semaphore after writing}}
\DoxyCodeLine{56       sprintf(msg, \textcolor{stringliteral}{"Client [\%s]: Update tree process done."}, cli\_addr);}
\DoxyCodeLine{57       \textcolor{keywordflow}{return} msg;}
\DoxyCodeLine{58       \textcolor{keywordflow}{break};}
\DoxyCodeLine{59 }
\DoxyCodeLine{60     \textcolor{keywordflow}{case} EXIT\_PROGRAM:}
\DoxyCodeLine{61       sprintf(msg, \textcolor{stringliteral}{"Client [\%s]: Exited program."}, cli\_addr);}
\DoxyCodeLine{62       \textcolor{keywordflow}{return} msg;}
\DoxyCodeLine{63       \textcolor{keywordflow}{break};}
\DoxyCodeLine{64 }
\DoxyCodeLine{65     \textcolor{keywordflow}{default}:}
\DoxyCodeLine{66       sprintf(msg, \textcolor{stringliteral}{"Option \%d not supported\(\backslash\)n"}, mo);}
\DoxyCodeLine{67       \textcolor{keywordflow}{return} msg;}
\DoxyCodeLine{68   \}}
\DoxyCodeLine{69 \}}

\end{DoxyCode}
